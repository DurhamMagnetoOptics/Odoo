<odoo>
    <record id="mrp_bom_lot_view_mrp_product_produce_wizard" model="ir.ui.view">
        <field name="name">MRP BOM lot Produce Wizard</field>
        <field name="model">mrp.product.produce</field>
        <field name="inherit_id" ref="mrp.view_mrp_product_produce_wizard"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="bom_id" invisible="1"/>
            </field>        
            <field name="finished_lot_id" position="attributes">
            <!-- TODO make this actually work, right now it always executes the "false" branch -->
                <t t-if="o.product_id.link_BOM_to_lot">
                    <attribute name="context">{'default_product_id': product_id, 'default_company_id': company_id, 'default_bom_id': bom_id}</attribute>
                </t>
                <t t-else="">
                    <attribute name="context">{'default_product_id': product_id, 'default_company_id': company_id}</attribute>
                </t>
            </field>
        </field>
    </record>
</odoo>


                                
                                