<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    <!-- Warehouse -->
        <record id="stock_warhouse_DMO" model="stock.warehouse">
            <field name="name">DMO</field>
            <field name="code">DMO</field>
        </record>       


    <!-- Shortcuts -->
        <!-- create xml id for stock, "for more convenience" -->
        <function model="ir.model.data" name="_update_xmlids">
            <value model="base" eval="[{
                'xml_id': 'dmo_JIT2.stock_location_Stock',
                'record': obj().env.ref('dmo_JIT2.stock_warhouse_DMO').lot_stock_id
            }]"/>
        </function>  

        <!-- create xml id for manufacturing operation, "for more convenience" -->
        <function model="ir.model.data" name="_update_xmlids">
            <value model="base" eval="[{
                'xml_id': 'dmo_JIT2.picking_type_manu',
                'record': obj().env.ref('dmo_JIT2.stock_warhouse_DMO').manu_type_id
            }]"/>
        </function>   

        <!-- create xml id for receipt operation, "for more convenience" -->
        <function model="ir.model.data" name="_update_xmlids">
            <value model="base" eval="[{
                'xml_id': 'dmo_JIT2.picking_type_in',
                'record': obj().env.ref('dmo_JIT2.stock_warhouse_DMO').in_type_id
            }]"/>
        </function>        

        <!-- create xml id for internal operation, "for more convenience" -->
        <function model="ir.model.data" name="_update_xmlids">
            <value model="base" eval="[{
                'xml_id': 'dmo_JIT2.picking_type_int',
                'record': obj().env.ref('dmo_JIT2.stock_warhouse_DMO').int_type_id
            }]"/>
        </function>                    

    <!-- Locations -->
        <record id="stock_location_Stores" model="stock.location">
            <field name="name">Stores</field>
            <field name="putaway_savespace">True</field>
            <!--<field name="location_id" model="stock.location"
                eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').lot_stock_id.id"/>-->
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record>          
        <record id="stock_location_Vertical1" model="stock.location">
            <field name="name">Vertical 1</field>
            <field name="location_id" ref="stock_location_Stores"/>
        </record>  
        <record id="stock_location_Shelf1" model="stock.location">
            <field name="name">Shelf 1</field>
            <field name="location_id" ref="stock_location_Vertical1"/>
            <field name="barcode">LOC-1-1</field>
        </record>  
        <record id="stock_location_Shelf2" model="stock.location">
            <field name="name">Shelf 2</field>
            <field name="location_id" ref="stock_location_Vertical1"/>
            <field name="barcode">LOC-1-2</field>
        </record>       
        <record id="stock_location_Vertical2" model="stock.location">
            <field name="name">Vertical 2</field>
            <field name="location_id" ref="stock_location_Stores"/>
        </record>  
        <record id="stock_location_Shelf3" model="stock.location">
            <field name="name">Shelf 3</field>
            <field name="location_id" ref="stock_location_Vertical2"/>
            <field name="barcode">LOC-2-3</field>
        </record>  
        <record id="stock_location_Shelf4" model="stock.location">
            <field name="name">Shelf 4</field>
            <field name="location_id" ref="stock_location_Vertical2"/>
            <field name="barcode">LOC-2-4</field>
        </record>                       
        <record id="stock_location_Builds" model="stock.location">
            <field name="name">Builds</field>
            <field name="location_id" model="stock.location"
                eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').view_location_id.id"/>
        </record>          
        <record id="stock_location_HUST" model="stock.location">
            <field name="name">HUST</field>
            <field name="location_id" ref="stock_location_Builds"/>
            <field name="barcode">LOC-HUST</field>
        </record>   
        <record id="stock_location_IITH" model="stock.location">
            <field name="name">IITH</field>
            <field name="location_id" ref="stock_location_Builds"/>
            <field name="barcode">LOC-IITH</field>
        </record>              

        <!-- Route -->
        <record id="stock_location_route_ComponentResupply" model="stock.location.route">
            <field name="name">Component Resupply</field>
            <field name="product_selectable">True</field>
        </record>
        <record id="stock_location_route_SubassemblyResupply" model="stock.location.route">
            <field name="name">Subassembly Resupply</field>
            <field name="product_selectable">True</field>
        </record>     


        <record id="ir_sequence_testseq2" model="ir.sequence">
            <field name="prefix">AA</field>
            <field name="suffix">BB</field>
            <field name="padding">4</field>
            <field name="number_increment">5</field>
            <field name="company_id" model="res.company" eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').company_id.id"/>
            <field name="implementation">standard</field>
            <field name="name">TestSeq2</field>
        </record>            

        <!-- Products-->
        <record id="product_product_MW3" model="product.product">
            <field name="name">MW3</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">290</field>
            <field name="list_price">520</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">MicroWriter 3</field>
            <field name="default_code">DMO_MW3</field>
            <field name="sale_ok">True</field>
            <field name="purchase_ok">False</field>             
            <field name="tracking">serial</field>
            <field name="link_BOM_to_lot">True</field>
            <field name="company_id" model="res.company" eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').company_id.id"/>
            <field name="sequence_id" ref="ir_sequence_testseq2"/>
        </record>    
        <record id="product_product_SubA" model="product.product">
            <field name="name">SubA</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">12</field>
            <field name="list_price">15</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">Subassembly A</field>
            <field name="default_code">DMO_XY2</field>
            <field name="route_ids" eval="[(6, 0, [ref('stock_location_route_SubassemblyResupply')])]"/>            
            <field name="sale_ok">False</field>
            <field name="purchase_ok">False</field>             
        </record>         
        <record id="product_product_CompA" model="product.product">
            <field name="name">CompA</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">2.50</field>
            <field name="list_price">2.50</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">Machined Component</field>
            <field name="default_code">PL-12345</field>
            <field name="barcode">PL-12345</field>
            <field name="route_ids" eval="[(6, 0, [ref('stock_location_route_ComponentResupply')])]"/>
            <field name="sale_ok">False</field>
            <field name="purchase_ok">True</field>            
        </record>    
        <record id="product_product_CompB" model="product.product">
            <field name="name">CompB</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">0.03</field>
            <field name="list_price">0.03</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">Screw</field>
            <field name="default_code">PT-12345</field>
            <field name="barcode">474824</field>
            <field name="route_ids" eval="[(6, 0, [ref('stock_location_route_ComponentResupply')])]"/>   
            <field name="sale_ok">False</field>
            <field name="purchase_ok">True</field>                       
        </record> 
        <record id="product_product_CompC" model="product.product">
            <field name="name">CompC</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">0.03</field>
            <field name="list_price">0.03</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">Big Screw</field>
            <field name="default_code">PT-23456</field>
            <field name="barcode">23456</field>
            <field name="route_ids" eval="[(6, 0, [ref('stock_location_route_ComponentResupply')])]"/>   
            <field name="sale_ok">False</field>
            <field name="purchase_ok">True</field>                       
        </record> 
        <record id="product_product_CompD" model="product.product">
            <field name="name">CompD</field>
            <field name="categ_id" ref="product.product_category_5"/>
            <field name="standard_price">0.03</field>
            <field name="list_price">0.03</field>
            <field name="type">product</field>
            <field name="weight">0.01</field>
            <field name="uom_id" ref="uom.product_uom_unit"/>
            <field name="uom_po_id" ref="uom.product_uom_unit"/>
            <field name="description">Small Screw</field>
            <field name="default_code">PT-34567</field>
            <field name="barcode">34567</field>
            <field name="route_ids" eval="[(6, 0, [ref('stock_location_route_ComponentResupply')])]"/>   
            <field name="sale_ok">False</field>
            <field name="purchase_ok">True</field>                       
        </record>                           

        <!-- Rules -->
        <record id="stock_location_rule_Kitting" model="stock.rule">
            <field name="name">Kitting</field>
            <field name="action">pull</field>
            <field name="picking_type_id" ref="dmo_JIT2.picking_type_int"/>
            <field name="location_src_id" ref="dmo_JIT2.stock_location_Stock"/>
            <field name="location_id" ref="stock_location_Builds"/>   
            <field name="procure_method">make_to_stock</field>
            <field name="route_id" ref="stock_location_route_ComponentResupply"/>
            <field name="sequence">10</field> 
            <field name="propagate_cancel">True</field>
            <field name="group_propagation_option">none</field>
        </record>        
        <record id="stock_location_rule_Restock" model="stock.rule">
            <field name="name">Restock</field>
            <field name="action">pull</field>
            <field name="picking_type_id" ref="dmo_JIT2.picking_type_in"/>
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>   
            <field name="location_src_id" ref="stock.stock_location_suppliers"/>
            <field name="procure_method">make_to_stock</field>
            <field name="route_id" ref="stock_location_route_ComponentResupply"/>
            <field name="sequence">10</field> 
            <field name="propagate_cancel">True</field>
            <field name="group_propagation_option">none</field>
        </record>                                             
       

        <record id="stock_location_rule_MTOSubAssy" model="stock.rule">
            <field name="name">Build Subassy</field>
            <field name="action">manufacture</field>
            <field name="picking_type_id" model="stock.picking.type"
                eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').manu_type_id.id"/>
            <field name="location_id" ref="stock_location_Builds"/>   
            <field name="route_id" ref="stock_location_route_SubassemblyResupply"/>   
            <field name="sequence">25</field>  
            <field name="propagate_cancel">True</field>            
        </record>               
        <record id="stock_location_rule_MTOKittingSub" model="stock.rule">
            <field name="name">Subassy On Demand</field>
            <field name="action">pull</field>
            <field name="picking_type_id" model="stock.picking.type"
                eval="obj().env.ref('dmo_JIT2.stock_warhouse_DMO').manu_type_id.id"/>
            <field name="location_src_id" ref="stock_location_Builds"/>   
            <field name="location_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_CompA').property_stock_production.id"/>   
            <field name="procure_method">make_to_order</field>              
            <field name="route_id" ref="stock_location_route_SubassemblyResupply"/>   
            <field name="sequence">30</field>            
            <field name="propagate_cancel">True</field>  
        </record>                      
     

        <!-- Supplier -->       
        <record id="product_supplierinfo_CompA" model="product.supplierinfo">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_CompA').product_tmpl_id.id"/> 
            <field name="name" ref="base.res_partner_12"/>
            <field name="delay">1</field>
            <field name="min_qty">10.0</field>
            <field name="price">2.50</field>
        </record>   
        <record id="product_supplierinfo_CompB" model="product.supplierinfo">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_CompB').product_tmpl_id.id"/> 
            <field name="name" ref="base.res_partner_12"/>
            <field name="delay">1</field>
            <field name="min_qty">100.0</field>
            <field name="price">3.33</field>
        </record>    
        <record id="product_supplierinfo_CompC" model="product.supplierinfo">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_CompC').product_tmpl_id.id"/> 
            <field name="name" ref="base.res_partner_12"/>
            <field name="delay">1</field>
            <field name="min_qty">100.0</field>
            <field name="price">3.33</field>
        </record>                     
        <record id="product_supplierinfo_CompD" model="product.supplierinfo">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_CompD').product_tmpl_id.id"/> 
            <field name="name" ref="base.res_partner_12"/>
            <field name="delay">1</field>
            <field name="min_qty">100.0</field>
            <field name="price">3.33</field>
        </record>          

        <!-- Rordering rules -->
        <record id="stock_oderpoint_CompA" model="stock.warehouse.orderpoint">
            <field name="product_id" ref="product_product_CompA"/>
            <field name="product_min_qty">20</field>
            <field name="product_max_qty">20</field>
            <field name="qty_multiple">1</field>
            <field name="warehouse_id" ref="stock_warhouse_DMO"/> 
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record>          
        <record id="stock_oderpoint_CompB" model="stock.warehouse.orderpoint">
            <field name="product_id" ref="product_product_CompB"/>
            <field name="product_min_qty">10</field>
            <field name="product_max_qty">10</field>
            <field name="qty_multiple">1</field>
            <field name="warehouse_id" ref="stock_warhouse_DMO"/> 
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record> 
        <record id="stock_oderpoint_CompC" model="stock.warehouse.orderpoint">
            <field name="product_id" ref="product_product_CompC"/>
            <field name="product_min_qty">10</field>
            <field name="product_max_qty">10</field>
            <field name="qty_multiple">1</field>
            <field name="warehouse_id" ref="stock_warhouse_DMO"/> 
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record>   
        <record id="stock_oderpoint_CompD" model="stock.warehouse.orderpoint">
            <field name="product_id" ref="product_product_CompD"/>
            <field name="product_min_qty">150</field>
            <field name="product_max_qty">150</field>
            <field name="qty_multiple">1</field>
            <field name="warehouse_id" ref="stock_warhouse_DMO"/> 
            <field name="location_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record>                    

        <!-- Resource: stock.inventory.line -->
        <record id="stock_inventory_CompA" model="stock.inventory">
            <field name="name">Starting CompA Inventory</field>
        </record>
        <record id="stock_inventory_line_CompA" model="stock.inventory.line">
            <field name="product_id" ref="product_product_CompA"/>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="inventory_id" ref="stock_inventory_CompA"/>
            <field name="product_qty">2.0</field>
            <field name="location_id" ref="stock_location_Shelf2"/>
        </record>  
        <function model="stock.inventory" name="_action_start">
            <function eval="[[('state','=','draft'),('id', '=', ref('stock_inventory_CompA'))]]" model="stock.inventory" name="search"/>
        </function>
        <function model="stock.inventory" name="action_validate">
            <function eval="[[('state','=','confirm'),('id', '=', ref('stock_inventory_CompA'))]]" model="stock.inventory" name="search"/>
        </function>    

        <record id="stock_inventory_CompC" model="stock.inventory">
            <field name="name">Starting CompC Inventory</field>
        </record>
        <record id="stock_inventory_line_CompC" model="stock.inventory.line">
            <field name="product_id" ref="product_product_CompC"/>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="inventory_id" ref="stock_inventory_CompC"/>
            <field name="product_qty">20.0</field>
            <field name="location_id" ref="stock_location_Shelf3"/>
        </record>  
        <function model="stock.inventory" name="_action_start">
            <function eval="[[('state','=','draft'),('id', '=', ref('stock_inventory_CompC'))]]" model="stock.inventory" name="search"/>
        </function>
        <function model="stock.inventory" name="action_validate">
            <function eval="[[('state','=','confirm'),('id', '=', ref('stock_inventory_CompC'))]]" model="stock.inventory" name="search"/>
        </function>  

        <record id="stock_inventory_CompD" model="stock.inventory">
            <field name="name">Starting CompD Inventory</field>
        </record>
        <record id="stock_inventory_line_CompD" model="stock.inventory.line">
            <field name="product_id" ref="product_product_CompD"/>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="inventory_id" ref="stock_inventory_CompD"/>
            <field name="product_qty">200.0</field>
            <field name="location_id" ref="stock_location_Shelf1"/>
        </record>  
        <function model="stock.inventory" name="_action_start">
            <function eval="[[('state','=','draft'),('id', '=', ref('stock_inventory_CompD'))]]" model="stock.inventory" name="search"/>
        </function>
        <function model="stock.inventory" name="action_validate">
            <function eval="[[('state','=','confirm'),('id', '=', ref('stock_inventory_CompD'))]]" model="stock.inventory" name="search"/>
        </function>                    
        
        <record id="stock_inventory_SubA" model="stock.inventory">
            <field name="name">Starting SubA Inventory</field>
        </record>
        <record id="stock_inventory_line_SubA" model="stock.inventory.line">
            <field name="product_id" ref="product_product_SubA"/>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="inventory_id" ref="stock_inventory_SubA"/>
            <field name="product_qty">1.0</field>
            <field name="location_id" ref="stock_location_Shelf4"/>
        </record>  
        <function model="stock.inventory" name="_action_start">
            <function eval="[[('state','=','draft'),('id', '=', ref('stock_inventory_SubA'))]]" model="stock.inventory" name="search"/>
        </function>
        <function model="stock.inventory" name="action_validate">
            <function eval="[[('state','=','confirm'),('id', '=', ref('stock_inventory_SubA'))]]" model="stock.inventory" name="search"/>
        </function>            


        <!-- BOM -->
        <record id="mrp_bom_MW3" model="mrp.bom">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_MW3').product_tmpl_id.id"/>      
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="code">New</field>
            <field name="sequence">5</field>
            <field name="multilevel_kitting">1</field>           
        </record>
        <record id="mrp_bom_manufacture_line_1" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompB"/>
            <field name="product_qty">25</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3"/>
            <field name="multilevel_kitting_name">Bin1</field>
        </record> 
        <record id="mrp_bom_manufacture_line_2" model="mrp.bom.line">
            <field name="product_id" ref="product_product_SubA"/>
            <field name="product_qty">1</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3"/>
            <field name="multilevel_kitting_name">Bin2</field>            
        </record>    
        <record id="mrp_bom_manufacture_line_3" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompC"/>
            <field name="product_qty">15</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3"/>
            <field name="multilevel_kitting_name">Bin1</field>
        </record> 
        <record id="mrp_bom_manufacture_line_4" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompD"/>
            <field name="product_qty">30</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3"/>
            <field name="multilevel_kitting_name">Bin1</field>
        </record>                      

        <record id="mrp_bom_MW3_old" model="mrp.bom">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_MW3').product_tmpl_id.id"/>      
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="code">Old</field>
            <field name="sequence">10</field>           
        </record>
        <record id="mrp_bom_manufacture_line_1_old" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompB"/>
            <field name="product_qty">25</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3_old"/>
        </record> 
        <record id="mrp_bom_manufacture_line_2_old" model="mrp.bom.line">
            <field name="product_id" ref="product_product_SubA"/>
            <field name="product_qty">2</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_MW3_old"/>
        </record>               

        <record id="mrp_bom_SubA" model="mrp.bom">
            <field name="product_tmpl_id" model="product.template"
                eval="obj().env.ref('dmo_JIT2.product_product_SubA').product_tmpl_id.id"/>      
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="multilevel_kitting">0</field>
        </record>
        <record id="mrp_bom_manufacture_line_SubA1" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompA"/>
            <field name="product_qty">9.0</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_SubA"/>
        </record>      
        <record id="mrp_bom_manufacture_line_SubA2" model="mrp.bom.line">
            <field name="product_id" ref="product_product_CompB"/>
            <field name="product_qty">14.0</field>
            <field name="product_uom_id" ref="uom.product_uom_unit"/>
            <field name="sequence">5</field>
            <field name="bom_id" ref="mrp_bom_SubA"/>
        </record>                            

        <!-- Settings -->
        <record id="my_config_settings" model="res.config.settings">
            <field name="group_stock_multi_locations" eval="True"/>
            <field name="group_stock_adv_location" eval="True"/>
        </record>
        <function model="res.config.settings" name="execute">
            <value model="res.config.settings"
                search="[('id', '=', ref('my_config_settings'))]"/>
        </function>     

        <!-- Receipts go to top-level stock -->
        <!-- Leftovers will be moved out after all pulls are accounted for -->      
        <record id="dmo_JIT2.picking_type_in" model="stock.picking.type">
            <field name="default_location_dest_id" ref="dmo_JIT2.stock_location_Stock"/>
        </record>                   

        <!-- Clear default locations on Manufacturing Operation -->
        <!-- Turn on multilevel kitting -->
        <record id="dmo_JIT2.picking_type_manu" model="stock.picking.type">
            <field name="multilevel_kitting">True</field>
            <field name="default_location_dest_id"></field>
            <field name="default_location_src_id"></field>         
        </record>       

             
    </data>
</odoo> 